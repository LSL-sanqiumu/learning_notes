# 计算机网络

# 概述上

## 计算机网络

计算机网络 = 通信技术 + 计算机技术。

![](img/1.通信系统模型.png)

计算机网络？

- 计算机网络是互连的、自治的计算机集合。（自治：无主从关系，互连：互联互通）
- 计算机网络通过交换网络互连主机。

如何解释Internet？

1. 从组成细节上来讲，Internet就是全球最大的互连网络，是ISP网络互连起来的“网络之网络”，其由以下组成几部分：
   - 数以百万计的互连的计算机设备集合。（也就是主机（hosts，也称为端系统，end system），能运行各种网络应用）。
   - 链路。（分无线链路和有线链路，例如光纤、铜缆、无线电、卫星......）
   - 交换网络。（作用是转发分组数据包，由路由器（routes）和交换机（switches）提供物理支持）
2. 从服务角度上来讲，其是为网络应用提供通信服务 的通信基础设施，是为网络应用提供应用编程接口（API）。
   - Web, VoIP, email, 网络游戏, 电子商务, 社交网络, …...
   - 支持应用程序“连接” Internet，发送/接收数据 ；提供类似于邮政系统的数据 传输服务。

可是仅仅有硬件的连接并不能实现Internet的顺畅运行和数据的有效交付，还需要网络协议。

## 协议

网络协议，简称协议，是为进行网络中的数据交换而建立的规则、标准或约定。协议规范了网络中所有信息发送和接收过程，是通信或信息交换过程应该遵守的规则。不同的协议所对应的功能实现也不一样。

协议规定了通信实体之间所交换的信息格式、意义、顺序以及针对收到信息或发 生的事件所采取的“动作”（actions）。

协议三要素：

1. 语法syntax：（类比于写信格式）
   - 就是数据与控制信息的结构或格式（发送的数据的内容格式）。
   - 底层信息对象：信号电平。
2. 语义semantics：（类比于信封上的信息）
   - 规定信息交换过程中需要发出的控制信息、接收到信息时要完成何种动作以及做出何种响应。
   - 差错控制。
3. 时序timing：规定双方交换信息的事件顺序和速度匹配。

Internet标准协议：RFC（Request for Comments）。IETF负责。

## 计算机网络结构

### 计算机网络结构

计算机网络结构有三部分组成：

1. 网络边缘：主机、网络应用。
   - 网络应用模型有客户/服务器(client/server)应用模型、对等(peer-peer, P2P)应用模型。
   - C/S：客户发送请求，接收服务器响应，如：Web应用，文件传输FTP应用。
   - P2P：无（或不仅依赖）专用服务器，通信在对等实体之间直接进行，如：Gnutella, BT, Skype, QQ。
2. 接入网络：有线或无线通信链路。
3. 网络核心（核心网络）: 互联的路由器（或分组转发设备）网络。
   - 网络核心的关键功能：路由 + 转发。
   - 路由(routing):  确定分组从源到目的传输路径，路由器遵循一定的协议来执行路由算法来确定路由上哪个路由器或服务器。
   - 转发(forwarding):  将分组从路由器的输入端口交换至正确的输出端口。
   - 如何实现数据从源主机通过网络核心送达目的主机？就是通过**数据交换**。

典型的网络传输速率：10 Mbps, 100Mbps, 1Gbps, 10Gbps。100Mbps = 100/8 Mb/s = 12.5Mb/s。

### Internet结构

![](img/4.直接互连.png)

![](img/5.ISP.png)

![](img/6.竞争.png)

![](img/7.ixp.png)

![](img/8.区域网络.png)

![](img/9.服务商网络.png)

所以在网络中心出现以下情况:

-  少数互连的大型网络，“一级”(tier-1)商业ISPs (如：网通、电信、Sprint、 AT&T)，提供国家或国际范围的覆盖 。
-  内容提供商网络（content provider network，如：Google)：私有网络， 连接其数据中心与Internet，通常绕过一级ISP和区域ISPs。

网络拓扑结构：

是指用传输媒体互连各种设备的物理布局，就是用什么方式把网络中的计算机等设备连接起来。 拓扑图给出网络服务器、工作站的网络配置和相互间的连接，它的结构主要有星型结构、环型结构、总线结构、分布式结构、树型结构、网状结构、蜂窝状结构等。 实现网络拓扑发现可以针对不同的需求选择最佳网络结构，提高网络通信效率，增强通信稳定性。

## 数据交换

如何实现数据从源主机通过网络核心送达目的主机？就是通过**数据交换**，数据交换依赖于交换设备。

![](img/10.交换网络.png)

如果主机之间以直连的方式，当连接的主机过多，那么每台主机所要维护的接口就过多，同时也会存在N^2链路问题；为了解决这些问题，就用一台设备（交换设备）专门处理主机与主机之间的连接问题，但随之而来的问题是，如果主机数量太多，那么交换设备也要维护大量的接口，所以又发展出了交换网络来应对这种问题。

交换就是：动态转接端口、动态分配传输资源。其分为：电路交换 、报文交换、分组交换。

### 电路交换

最典型电路交换网络：电话网络。

电路交换的三个阶段： 建立连接（呼叫/电路建立）、通信 、释放连接（拆除电路）。

特点：一旦建立电路，通信双方占有的通信资源不能被第三方共享。

![](img/11.电路复用.png)

### 报文交换和分组交换

**报文交换：**

- 报文交换就是把整个报文作为一个整体一次性来进行交换到下一个节点路由器直到目的主机上。
- 报文：就是要发送的信息整体（比如文件、照片等，就是你要发送的具体信息内容，封装成了报文来发送）。

**分组交换：**

- 分组交换就是在源主机将报文拆成一些小的分组（拆分时会加入一些信息来封装），然后源主机一个分组一个分组来进行转发，直至所有分组转发到目的主机，然后目的主机就会按顺序将分组组装成完整的报文。
- 分组交换需要报文的拆分和重组。
- 分组：分组即数据包，是报文拆分出来的一系列相对较小的数据包。

报文交换、分组交换都采用“存储-转发”的方式。

**分组交换和报文交换的所用时间的比较：**

报文交换、分组交换都采用“存储-转发”的方式，路由器上只存储一份报文，待这份报文转发后才允许下一个报文进来存储待转发。

所以，分组传输会有一个分组延时：

![](img/12.分组延时.png)

我们计算一下分组交换、报文交换的时间：

![](img/13.交换时间.png)

![](img/14.报文交换_时间.png)

此时，以上述为例，如果通过报文交换的方式，中间的路由器至少需要7.5Mbit的缓存。

![](img/15.分组交换_时间.png)

此时，以上述为例，如果通过报文交换的方式，中间的路由器至少需要1500bit的缓存。

通过上述报文交换和分组交换的报文交付时间的比较，可以看出分组交换更节约时间，也因此，目前的大都采用的是分组交换的方式。

分组交换的交付时间计算公式：

![](img/16.分组交换交付时间计算.png)

![](img/17.例题.png)

分组数量：980000 / 980 = 1000组；路由器数：n = 2；分组大小：L = 1000B = 8000 bit；

分组后总报文长度：M = (980000 + 1000 * 20) B = (980000 + 1000 * 20) * 8 bit；

交付至少需要的时间为：

T = (M / R) + n*L / R = (980000 + 1000 * 20) * 8 / 100,000,000 + 2*8000 / 100,000,000 = 0.08 s+ 0.00016 s = 80.16ms.

分组交换 vs 电路交换？

分组交换：

1. 适用于突发数据传输网络 。
   - 资源充分共享 。
   - 简单、无需呼叫建立 。
2. 可能产生拥塞（congestion）: 分组延迟和丢失。
   - 需要协议处理可靠数据传输和拥塞控制。

电路交换：更实用于实时数据流传输。

#  概述下











